<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Roulotte Pro</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/public/style.css">
  <link rel="manifest" href="/public/manifest.json" />

  </head>
<body>
  <div id="viewLogin" class="modal-overlay hidden">
    <div class="card" style="width:100%;max-width:400px;padding:2rem;">
      <h2 style="margin-top:0">Accedi a Roulotte Pro</h2>
      <div class="grid">
        <input id="loginEmail" placeholder="Email" value="superadmin@roulotte.pro" />
        <input id="loginPass" placeholder="Password" type="password" value="admin" />
        <button id="loginBtn" class="btn btn-primary w-full">Login</button>
        <div id="loginOut" class="muted text-danger"></div>
      </div>
    </div>
  </div>

  <div id="confirmModal" class="modal-overlay hidden">
    <div class="card" style="width:100%;max-width:350px;padding:1.5rem;">
      <h3 id="confirmTitle">Conferma</h3>
      <p id="confirmMsg">Sei sicuro?</p>
      <div class="row mt-2 justify-end gap-2">
        <button class="btn btn-secondary" id="confirmCancel">Annulla</button>
        <button id="confirmOk" class="btn btn-danger">Conferma</button>
      </div>
    </div>
  </div>

  <header>
    <div class="brand">Roulotte Pro</div>
    <div class="row">
      <span class="pill" id="rolepill">ospite</span>
      <span class="muted" id="tokendisp">—</span>
      <button class="btn btn-secondary btn-sm" id="logoutBtn">Esci</button>
    </div>
  </header>
  <div class="container">
    <div class="tabs">
      <button id="tabOperatore" class="btn btn-primary">Operatore</button>
      <button id="tabAdmin" class="btn btn-secondary">Amministrazione</button>
      <button id="tabInfo" class="btn btn-secondary">Info</button>
    </div>
    <div id="viewOperatore">
      <div class="grid">
        <div class="card">
          <div class="title"><h2>Dashboard</h2><button class="secondary" id="dbRefresh">Aggiorna</button></div>
          <div class="row"><div id="dbCount" class="pill">0 schede</div><div id="dbValore" class="pill">€0 inventario</div><div id="dbWork" class="pill">0 in lavorazione</div><div id="dbPub" class="pill">0 pubblicate</div></div>
        </div>
        
        <div class="card">
          <h2>Nuova Roulotte</h2>
          <div class="grid grid-cols-2">
            <input id="marca" placeholder="Marca" />
            <input id="modello" placeholder="Modello" />
            <input id="anno" placeholder="Anno" type="number" />
            <select id="stato">
              <option value="ottimo">ottimo</option>
              <option value="buono">buono</option>
              <option value="da_sistemare" selected>da_sistemare</option>
              <option value="da_rottamare">da_rottamare</option>
            </select>
          </div>
          <div class="row mt-2"><button id="create" class="btn btn-primary">Crea</button></div>
          <div class="muted" id="createout"></div>
        </div>
        <div class="card">
          <h2>Scheda dettagliata</h2>
          <div class="grid grid-cols-2">
            <input id="d_marca" placeholder="Marca" />
            <input id="d_modello" placeholder="Modello" />
            <input id="d_anno" placeholder="Anno" type="number" />
            <input id="d_lunghezza" placeholder="Lunghezza" />
            <input id="d_larghezza" placeholder="Larghezza" />
            <input id="d_posti" placeholder="Posti letto" type="number" />
            <input id="d_peso_vuoto" placeholder="Peso a vuoto" type="number" />
            <input id="d_peso_complessivo" placeholder="Peso complessivo" type="number" />
            <input id="d_targa" placeholder="Targa / Non targata" />
            <input id="d_numero_telaio" placeholder="Numero telaio" />
          </div>
          <div class="row mt-2">
            <label><input type="checkbox" id="d_doc_libretto_presente" /> Libretto presente</label>
            <label><input type="checkbox" id="d_doc_libretto_mancante" /> Libretto mancante</label>
            <label><input type="checkbox" id="d_doc_libretto_smarrito" /> Libretto smarrito</label>
            <label><input type="checkbox" id="d_doc_demolizione" /> Roulotte da demolizione</label>
            <label><input type="checkbox" id="d_doc_stanziale" /> SOLO uso stanziale</label>
          </div>
          <div class="row mt-2">
            <select id="d_valutazione"><option>ottimo</option><option>buono</option><option>da_sistemare</option><option>da_rottamare</option></select>
            <input id="d_lavori" placeholder="Eventuali lavori consigliati" />
          </div>
          <div class="row mt-2">
            <input id="d_prezzo" placeholder="Prezzo richiesto" type="number" />
            <input id="d_prezzo_listino" placeholder="Prezzo listino" type="number" />
            <input id="d_garanzia" placeholder="Garanzia (mesi)" type="number" />
            <label><input type="checkbox" id="d_trattabile" /> Trattabile</label>
            <input id="d_disponibile" placeholder="Disponibile da" type="date" />
            <label><input type="checkbox" id="d_trasporto" /> Possibilità trasporto</label>
          </div>
          <div class="row mt-2">
            <h3 class="section-title">Esterno & Telaio</h3>
            <label><input type="checkbox" class="d_acc" value="Veranda" /> Veranda</label>
            <label><input type="checkbox" class="d_acc" value="Tendalino" /> Tendalino</label>
            <label><input type="checkbox" class="d_acc" value="Mover" /> Mover</label>
            <label><input type="checkbox" class="d_acc" value="Stabilizzatore" /> Stabilizzatore</label>
            <label><input type="checkbox" class="d_acc" value="Porta Bici" /> Porta Bici</label>
            <label><input type="checkbox" class="d_acc" value="Pannello Solare" /> Pannello Solare</label>
            <label><input type="checkbox" class="d_acc" value="Cerchi Lega" /> Cerchi Lega</label>
            <label><input type="checkbox" class="d_acc" value="Ruota Scorta" /> Ruota Scorta</label>
            <label><input type="checkbox" class="d_acc" value="Piedini Rinforzati" /> Piedini Rinforzati</label>
          </div>
          <div class="row mt-2">
            <h3 class="section-title">Interno & Comfort</h3>
            <label><input type="checkbox" class="d_acc" value="Climatizzatore" /> Climatizzatore</label>
            <label><input type="checkbox" class="d_acc" value="Stufa" /> Stufa</label>
            <label><input type="checkbox" class="d_acc" value="Canalizzazione" /> Canalizzazione</label>
            <label><input type="checkbox" class="d_acc" value="Boiler" /> Boiler Acqua Calda</label>
            <label><input type="checkbox" class="d_acc" value="Frigo Grande" /> Frigo Grande</label>
            <label><input type="checkbox" class="d_acc" value="Forno" /> Forno</label>
            <label><input type="checkbox" class="d_acc" value="Microonde" /> Microonde</label>
            <label><input type="checkbox" class="d_acc" value="Zanzariera Porta" /> Zanzariera Porta</label>
            <label><input type="checkbox" class="d_acc" value="Maxi Oblò" /> Maxi Oblò</label>
          </div>
          <div class="row mt-2">
            <h3 class="section-title">Tecnologia & Bagno</h3>
            <label><input type="checkbox" class="d_acc" value="Antenna TV" /> Antenna TV</label>
            <label><input type="checkbox" class="d_acc" value="TV" /> TV Inclusa</label>
            <label><input type="checkbox" class="d_acc" value="Impianto Audio" /> Impianto Audio</label>
            <label><input type="checkbox" class="d_acc" value="Prese USB" /> Prese USB</label>
            <label><input type="checkbox" class="d_acc" value="Inverter" /> Inverter</label>
            <label><input type="checkbox" class="d_acc" value="Doccia Separata" /> Doccia Separata</label>
            <label><input type="checkbox" class="d_acc" value="WC Cassetta" /> WC Cassetta</label>
            <label><input type="checkbox" class="d_acc" value="Serbatoio Grigie" /> Serbatoio Grigie</label>
            <label><input type="checkbox" class="d_acc" value="Attacco Acqua City" /> Attacco Acqua City</label>
          </div>
          <div class="row mt-2">
             <input id="d_layout" placeholder="Layout interno (es. letti gemelli)" />
             <select id="d_condizioni_veicolo"><option value="Usato">Usato</option><option value="Nuovo">Nuovo</option><option value="Km0">Km0</option><option value="Ex-Noleggio">Ex-Noleggio</option></select>
          </div>
          <div class="row mt-2"><button id="createDetailed" class="btn btn-primary">Crea dettagliata</button></div>
        </div>
        <div class="card mt-2">
          <h3 class="section-title">Gestione Immagini</h3>
          <div id="gallery" class="gallery"></div>
          <div class="row mt-2">
            <input type="file" id="photoInput" multiple accept="image/*" class="w-full">
          </div>
          <div class="row mt-1">
            <select id="photoCategory">
              <option value="esterno">Esterno</option>
              <option value="interno">Interno</option>
              <option value="dettagli">Dettagli</option>
              <option value="danni">Danni</option>
            </select>
            <button id="uploadBtn" class="btn btn-primary">Carica Foto</button>
          </div>
          <div id="uploadOut" class="muted"></div>
        </div>
        <div class="card col-span-full">
          <div class="title"><h2>Elenco Roulotte</h2>
            <div class="row">
              <input id="filterAnno" placeholder="Anno" type="number" />
              <select id="filterStato"><option value="">tutti</option><option>ottimo</option><option>buono</option><option>da_sistemare</option><option>da_rottamare</option></select>
              <select id="sortList">
                <option value="">Più recenti</option>
                <option value="prezzo:asc">Prezzo crescente</option>
                <option value="prezzo:desc">Prezzo decrescente</option>
                <option value="anno:desc">Anno più recente</option>
              </select>
              <input id="page" placeholder="Pagina" type="number" value="1" /><input id="pageSize" placeholder="Per pagina" type="number" value="20" /><button class="btn btn-secondary" id="refresh">Aggiorna</button><button class="btn btn-secondary" id="resetFilters">Reset filtri</button>
            </div>
          </div>
          <div id="list" class="grid" style="margin-top:.5rem"></div>
        </div>
      </div>
    </div>
    <div id="viewAdmin" class="hidden">
      <div class="grid">
        <div class="card">
          <div class="title"><h2>Amministrazione</h2><button class="btn btn-secondary" id="logsBtn">Log</button></div>
          <div class="row mt-2"><button id="exportBtn" class="btn btn-primary">Esporta JSON</button><input type="file" id="importFile" accept="application/json" /><button class="btn btn-secondary" id="importBtn">Importa</button></div>
          <div class="row mt-2"><select id="adminSelect"></select><button class="btn btn-secondary" id="unpublishBtn">Rimuovi pubblicazione</button><button id="deleteBtn" class="btn btn-danger">Elimina</button></div>
          <div class="row mt-2"><input id="afAnnoMin" placeholder="Anno min" type="number" /><input id="afAnnoMax" placeholder="Anno max" type="number" /><select id="afStato"><option value="">Stato</option><option>ottimo</option><option>buono</option><option>da_sistemare</option><option>da_rottamare</option></select><input id="afTag" placeholder="Tag AI contiene" /><button class="btn btn-secondary" id="afApply">Applica filtri</button></div>
          <div class="row mt-2"><div id="bulkList" style="max-height:200px;overflow:auto;border:1px solid var(--border);padding:.5rem;border-radius:.5rem;flex:1"></div></div>
          <div class="row mt-2"><button class="btn btn-secondary" id="bulkPublish">Bulk Pubblica</button><button class="btn btn-secondary" id="bulkUnpublish">Bulk Rimuovi Pubblicazione</button><button id="bulkDelete" class="btn btn-danger">Bulk Elimina</button></div>
          <div class="row mt-2"><input id="filterName" placeholder="Nome filtro" /><button class="btn btn-secondary" id="saveFilter">Salva filtro</button><button class="btn btn-secondary" id="loadFilters">Carica filtri</button><select id="filtersSelect"></select><button class="btn btn-secondary" id="applySavedFilter">Applica</button><button id="removeFilter" class="btn btn-danger">Rimuovi</button></div>
          <div class="row mt-2"><button class="btn btn-secondary" id="autoDescribe">Auto-descrivi selezionati</button></div>
          <div class="row mt-2"><textarea id="jsonEditor" class="json-editor" placeholder="Modifica JSON scheda selezionata"></textarea><button id="saveJson" class="btn btn-primary">Salva JSON</button></div>
          <pre id="adminOut" class="muted"></pre>
        </div>
      </div>
    </div>
    <div id="viewInfo" class="hidden">
      <div class="grid"><div class="card"><h2>Info</h2><div class="muted">Documentazione API in docs/openapi.yaml · Modello dati in docs/json-schemas/roulotte.schema.json.</div></div></div>
    </div>
  </div>
  <script src="/public/app.js"></script>
</body>
</html>
